# 目录遍历漏洞

## 1、目录遍历漏洞概述

```text
目录遍历漏洞概述
在web功能设计中,很多时候我们会要将需要访问的文件定义成变量，从而让前端的功能便的更加灵活。 当用户发起一个前端的请求时，便会将请求的这个文件的值(比如文件名称)传递到后台，后台再执行其对应的文件。 在这个过程中，如果后台没有对前端传进来的值进行严格的安全考虑，则攻击者可能会通过“../”这样的手段让后台打开或者执行一些其他的文件。 从而导致后台服务器上其他目录的文件结果被遍历出来，形成目录遍历漏洞。
看到这里,你可能会觉得目录遍历漏洞和不安全的文件下载，甚至文件包含漏洞有差不多的意思，是的，目录遍历漏洞形成的最主要的原因跟这两者一样，都是在功能设计中将要操作的文件使用变量的 方式传递给了后台，而又没有进行严格的安全考虑而造成的，只是出现的位置所展现的现象不一样，因此，这里还是单独拿出来定义一下。
需要区分一下的是,如果你通过不带参数的url（比如：http://xxxx/doc）列出了doc文件夹里面所有的文件，这种情况，我们成为敏感信息泄露。 而并不归为目录遍历漏洞。（关于敏感信息泄露你你可以在"i can see you ABC"中了解更多）
你可以通过“../../”对应的测试栏目，来进一步的了解该漏洞。
```

## 2、实战演练

目录遍历漏洞同样也是对于用户请求输入数据限制不完全造成。比如…/在linux下表示的是目录回溯，超过目录级数的…/最终都会回溯到根目录。我们就可以构造`../../../../../../etc/passwd`路径访问到/etc/passwd等文件。

正常请求

```text
http://x/vul/dir/dir_list.php?title=jarheads.php
```

替换title里的文件名参数。

```text
http://x/vul/dir/dir_list.php?title=../../../../../etc/passwd
```

成功读取了预期外的文件。

## 3、靶场演练

我们看到了概述界面的URL是：[http://123.56.245.68:83/vul/dir/dir.php](http://123.56.245.68:83/vul/dir/dir.php)

![image-20210104085158553](https://gitee.com/Harveysn0w/win-note_img/raw/master/image-20210104085158553.png)

那么我们打开目录遍历的页面，并且点击第一个连接，就会看到URL上面有着title的链接。

![image-20210104085358862](https://gitee.com/Harveysn0w/win-note_img/raw/master/image-20210104085358862.png)

接下来，我们构造此payload。修改URL，在”目录遍历“页面成功访问到”概述“页面。

```text
http://123.56.245.68:83/vul/dir/dir_list.php?title=../dir.php
```

![image-20210104090100703](https://gitee.com/Harveysn0w/win-note_img/raw/master/image-20210104090100703.png)

